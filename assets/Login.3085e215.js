import{bG as k,d as E,bH as V,r as d,a as I,o as S,b as L,c as K,g as m,e,f as a,W as B,aF as F,aM as N,u as v,bI as P,a9 as y,bJ as U,l as q,q as C,ae as R,O as A}from"./index.0dffe206.js";/* empty css                */import{E as J,a as M}from"./el-form-item.a65d8fdf.js";import{E as O}from"./el-input.615257d7.js";import{E as T}from"./el-alert.b559d9f0.js";import{l as j}from"./user.2a0b0e1c.js";import"./index.d7a56703.js";const z=k("main",{state:()=>({user:{token:""}}),actions:{async login(p,t){this.user=await j(p,t),localStorage.setItem("token",this.user.token),localStorage.setItem("user",JSON.stringify(this.user))}}}),D={class:"bg-white bg-opacity-25 px-6 py-8 w-80 shadow-md rounded-lg roubackdrop-filter backdrop-blur"},G={class:"text-center"},H={class:"mt-4"},W={class:"flex justify-center"},Q=q("Login"),X=E({__name:"Login",setup(p){const t=V(),r=d(!1),n=d(!1),_=d(),o=I({name:"",pass:""}),h=z();S(()=>{localStorage.getItem("token")&&t.replace("/")});function l(){_.value.validate(async i=>{if(i){const{name:s,pass:c}=o;try{r.value=!0,await h.login(s,c),t.replace("/"),n.value=!1,r.value=!1}catch{n.value=!0,r.value=!1}}})}return(i,s)=>{const c=C,f=T,g=O,b=J,w=R,x=M;return L(),K("div",D,[m("div",G,[e(c,{size:50,src:"/logo.png",class:"p-1"})]),e(N,{name:"fade"},{default:a(()=>[m("div",H,[B(e(f,{center:"","show-icon":"",type:"error",closable:!1,title:"Username or Password error"},null,512),[[F,n.value]])])]),_:1}),e(x,{ref_key:"formRef",ref:_,model:o,class:"mt-4"},{default:a(()=>[e(b,{class:"mb-8",prop:"name",rules:[{required:!0,message:"Please input user name",trigger:"blur"}]},{default:a(()=>[e(g,{modelValue:o.name,"onUpdate:modelValue":s[0]||(s[0]=u=>o.name=u),clearable:"",placeholder:"Username: admin or user","prefix-icon":v(P),onKeyup:y(l,["enter"])},null,8,["modelValue","prefix-icon","onKeyup"])]),_:1}),e(b,{class:"mb-12",prop:"pass",rules:[{required:!0,message:"Please input password",trigger:"blur"}]},{default:a(()=>[e(g,{modelValue:o.pass,"onUpdate:modelValue":s[1]||(s[1]=u=>o.pass=u),"show-password":"",placeholder:"Password: vite","prefix-icon":v(U),onKeyup:y(l,["enter"])},null,8,["modelValue","prefix-icon","onKeyup"])]),_:1}),m("div",W,[e(w,{round:"",type:"primary",class:"w-3/5 px-10",disabled:!o.name||!o.pass,loading:r.value,onClick:l},{default:a(()=>[Q]),_:1},8,["disabled","loading"])])]),_:1},8,["model"])])}}});const te=A(X,[["__scopeId","data-v-87db5415"]]);export{te as default};
